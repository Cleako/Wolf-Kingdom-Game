var combat=function(){this.attackInput=null,this.defenseInput=null,this.strengthInput=null,this.hitsInput=null,this.rangedInput=null,this.prayerInput=null,this.magicInput=null,this.latestFormData=null};combat.prototype.init=function(a,b){this.attackInput=document.getElementsByName(b[0])[0],this.defenseInput=document.getElementsByName(b[1])[0],this.strengthInput=document.getElementsByName(b[2])[0],this.hitsInput=document.getElementsByName(b[3])[0],this.rangedInput=document.getElementsByName(b[4])[0],this.prayerInput=document.getElementsByName(b[5])[0],this.magicInput=document.getElementsByName(b[6])[0],this.resultDiv=document.getElementById(a)},combat.prototype.newCalculation=function(){if(this.latestFormData=this.getLatestFromInputs(),this.latestFormData!=-1){var a=this.getNewCombat();this.renderToPage(a)}else alert("Error. Please check you have entered all fields correctly.")},combat.prototype.autoGenerateHits=function(){var a=webcalcs.expTable.getExpFromLevel(parseInt(this.attackInput.value)),b=webcalcs.expTable.getExpFromLevel(parseInt(this.strengthInput.value)),c=webcalcs.expTable.getExpFromLevel(parseInt(this.defenseInput.value)),d=a+b+c,e=d/3+webcalcs.expTable.getExpFromLevel(10),f=webcalcs.expTable.getLevelFromExp(e);this.hitsInput.value=f},combat.prototype.getLatestFromInputs=function(){var a=parseInt(this.attackInput.value),b=parseInt(this.defenseInput.value),c=parseInt(this.strengthInput.value),d=parseInt(this.hitsInput.value),e=parseInt(this.rangedInput.value),f=parseInt(this.prayerInput.value),g=parseInt(this.magicInput.value);if(a>=1&&a<100&&b>=1&&b<100&&c>=1&&c<100&&d>=1&&d<100&&e>=1&&e<100&&f>=1&&f<100&&g>=1&&g<100){var h={};return h.newAttack=a,h.newDefense=b,h.newStrength=c,h.newHits=d,h.newRanged=e,h.newMagic=g,h.newPrayer=f,h}return-1},combat.prototype.renderToPage=function(a){var b;if(b="<h2>Combat Level: "+a.cmb.toString()+" </h2><br>","RANGER"==a.theClass){var c=Math.floor(1.5*this.latestFormData.newRanged);b+="You are primarily a <strong>Ranger</strong><br /><br />If your ranged level does not change, your <br />attack and strength will have no effect on <br />your combat until they add to "+c+"<br /><br />"}if("FIGHTER"==a.theClass){var d=Math.floor((this.latestFormData.newAttack+this.latestFormData.newStrength)/1.5)+1;b+="You are primarily a <strong>Fighter</strong><br /><br />",b+=d>99?"Your ranged will never have an effect on your combat level.<br /><br />":"Your ranged will have no effect on your combat until it is level "+d+".<br /><br />"}for(var e=this.latestFormData.newRanged,f=0,g=100;g>0;g--){var h=e+g;this.latestFormData.newRanged=h;var i=this.getNewCombat();if(i.cmb<=Math.floor(a.cmb+1)){f=g;break}}this.latestFormData.newRanged=e;for(var j=this.latestFormData.newAttack,k=0,g=100;g>0;g--){var l=j+g;this.latestFormData.newAttack=l;var i=this.getNewCombat();if(i.cmb<Math.floor(a.cmb+1)){k=g;break}}this.latestFormData.newAttack=j;for(var m=this.latestFormData.newPrayer,n=0,g=100;g>0;g--){var o=m+g;this.latestFormData.newPrayer=o;var i=this.getNewCombat();if(i.cmb<Math.floor(a.cmb+1)){n=g;break}}this.latestFormData.newPrayer=m;for(var m=this.latestFormData.newPrayer,n=0,g=100;g>0;g--){var o=m+g;this.latestFormData.newPrayer=o;var i=this.getNewCombat();if(i.cmb<Math.floor(a.cmb+1)){n=g;break}}this.latestFormData.newPrayer=m,b+="RANGER"==a.theClass?"You can gain "+f+" ranged levels or <br> "+k+" Attack / Strength / Defense levels or <br>"+n+" Magic / Prayer levels <br>":"You can gain: <br>"+k+" Attack / Strength / Defense levels or <br>"+n+" Magic / Prayer levels <br>",b+="before advancing a combat level.",this.resultDiv.innerHTML=b,this.resultDiv.className+="alert alert-combat"},combat.prototype.getNewCombat=function(){var a=.25*(this.latestFormData.newDefense+this.latestFormData.newHits)+.125*(this.latestFormData.newMagic+this.latestFormData.newPrayer),b=.25*(this.latestFormData.newAttack+this.latestFormData.newStrength),c=.375*this.latestFormData.newRanged,d=a+(1.5*this.latestFormData.newRanged>this.latestFormData.newAttack+this.latestFormData.newStrength?c:b),e={};e.cmb=d;var f="";return f=this.latestFormData.newAttack+this.latestFormData.newStrength<1.5*this.latestFormData.newRanged?"RANGER":"FIGHTER",e.theClass=f,e};